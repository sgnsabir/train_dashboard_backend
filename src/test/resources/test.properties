# =========================================
# Application Name (for testing)
# =========================================
spring.application.name=predictive-maintenance-backend-test

# =========================================
# Active Profile
# =========================================
spring.profiles.active=test

# =========================================
# Server Configuration for Testing
# =========================================
server.port=0
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# =========================================
# R2DBC Database Configuration for Testing
# (Using embedded H2 in PostgreSQL compatibility mode)
# =========================================
spring.r2dbc.url=r2dbc:h2:mem:///testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
spring.r2dbc.username=sa
spring.r2dbc.password=
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=10
spring.r2dbc.initialization-mode=always
spring.r2dbc.schema=classpath:schema-test.sql
spring.r2dbc.data=classpath:data-test.sql

# =========================================
# Kafka Configuration for Testing
# =========================================
# Pointing to localhost so that tests do not require an external Kafka instance.
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=banenor-test-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer

# =========================================
# Redis & Caching Configuration for Testing
# =========================================
# Disable caching for tests if Redis is not available.
spring.cache.type=none

# =========================================
# SMTP (Mail) Configuration for Testing
# =========================================
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=selbdtest@gmail.com
spring.mail.password=Qatesst1
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false

# =========================================
# JWT Configuration for Testing
# =========================================
jwt.secret=pizu4x1nwMvlI7j43qdyk6IV8PDJxcaAFrUxpgsWDGDLh1PThxDikoNTUCTOhS1PubKXMjxrDcpQYSVJDbl9nw==
jwt.expiration-in-seconds=18000

# =========================================
# Maintenance Thresholds (Baseline & Realtime)
# =========================================
maintenance.speed-threshold=85.0
maintenance.aoa-threshold=5.0
maintenance.vibration-threshold=3.0
maintenance.vertical-force-threshold=500.0
maintenance.lateral-force-threshold=300.0
maintenance.lateral-vibration-threshold=2.0
maintenance.axle-load-threshold=1000.0

maintenance.realtime-speed-threshold=80.0
maintenance.realtime-vibration-left-threshold=5.0
maintenance.realtime-vibration-right-threshold=5.0
maintenance.realtime-vertical-force-left-threshold=550.0
maintenance.realtime-vertical-force-right-threshold=550.0
maintenance.realtime-lateral-force-right-threshold=350.0
maintenance.realtime-lateral-vibration-right-threshold=2.5

# =========================================
# Additional Test Constants & Credentials (Dynamic)
# =========================================
test.username=${TEST_USERNAME:guest}
test.password=${TEST_PASSWORD:guest}
test.jwt.token=${TEST_JWT_TOKEN:pizu4x1nwMvlI7j43qdyk6IV8PDJxcaAFrUxpgsWDGDLh1PThxDikoNTUCTOhS1PubKXMjxrDcpQYSVJDbl9nw==}
test.registration.username=${TEST_REGISTRATION_USERNAME:guest}
test.registration.email=${TEST_REGISTRATION_EMAIL:selbdantest@gmail.com}
test.registration.password=${TEST_REGISTRATION_PASSWORD:guest}
test.random.constant=${TEST_RANDOM_CONSTANT:someRandomConstant}

# =========================================
# WebSocket Configuration for Testing
# =========================================
websocket.allowedOrigins=http://localhost:3000

# =========================================
# RabbitMQ for STOMP Broker Relay (Testing)
# =========================================
spring.rabbitmq.host=localhost
spring.rabbitmq.stomp.port=61613
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# =========================================
# Alert Check Interval (ms)
# =========================================
alert.check.interval.ms=60000

# =========================================
# Jackson Serialization: ISO 8601 Dates
# =========================================
spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=true

# =========================================
# Banner Configuration (Console)
# =========================================
spring.main.banner-mode=console

# =========================================
# Vault Configuration (Disabled for Testing)
# =========================================
spring.cloud.vault.enabled=false
